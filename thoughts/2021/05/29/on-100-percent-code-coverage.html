<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>On one hundred percent code coverage</title>
    <meta name="description"
      content="The mindset for testing for developers has changed over the years as the softwareindustry is evolving. Even though, testing practice is not widely used, it i...">

    <link rel="canonical" href="https://marabesi.com/thoughts/2021/05/29/on-100-percent-code-coverage.html">
    <link rel="alternate" type="application/rss+xml" title="Marabesi"
      href="https://marabesi.com/feed.xml">

    <meta property="og:title" content="On one hundred percent code coverage" />
    <meta property="og:site_name" content="marabesi.com" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://marabesi.com/thoughts/2021/05/29/on-100-percent-code-coverage.html" />
    <meta property="og:image:alt" content="" />
    <meta property="og:image"
      content="https://marabesi.com/images/posts/2021-05-29-on-100-percent-code-coverage/cover.png" />
    <meta property="og:description"
      content="The mindset for testing for developers has changed over the years as the softwareindustry is evolving. Even though, testing practice is not widely used, it i..." />

    <meta property="fb:app_id" content="536384943068161" />

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@MatheusMarabesi">
    <meta name="twitter:title" content="On one hundred percent code coverage">
    <meta name="twitter:description"
      content="The mindset for testing for developers has changed over the years as the softwareindustry is evolving. Even though, testing practice is not widely used, it i...">
    <meta name="twitter:creator" content="@MatheusMarabesi">
    <meta name="twitter:image:src"
      content="https://marabesi.com/images/posts/2021-05-29-on-100-percent-code-coverage/cover.png">

    <meta name="author" content="Matheus Marabesi">
    <meta name="publish_date" property="og:publish_date" content="2021-05-29 04:06:05 +0000">

    <meta name="keywords" content="code,coverage,TDD,test,test suite,testing,software,development,developers,quality,suite,Test,percent,driven,Code,rules,gates,test driven development,tests,Farley" />

    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">

    <link href="/assets/main-bundle.css" rel="stylesheet" />

    <!-- See https://goo.gl/OOhYW5 -->
    <link rel="manifest" href="/manifest.json">

    <!-- See https://goo.gl/qRE0vM -->
    <meta name="theme-color" content="#3f51b5">

    <!-- Add to homescreen for Chrome on Android. Fallback for manifest.json -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Marabesi">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Marabesi">

    <!-- Homescreen icons -->
    <link rel="apple-touch-icon" href="/images/manifest/icon-48x48.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/manifest/icon-72x72.png">
    <link rel="apple-touch-icon" sizes="96x96" href="/images/manifest/icon-96x96.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/manifest/icon-144x144.png">
    <link rel="apple-touch-icon" sizes="192x192" href="/images/manifest/icon-192x192.png">

    <!-- Tile icon for Windows 8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="/images/manifest/icon-144x144.png">
    <meta name="msapplication-TileColor" content="#3f51b5">
    <meta name="msapplication-tap-highlight" content="no">
  </head>

  <body class="font-sans overflow-x-hidden">
    <button class="update-button w-full text-white bg-marabesi-purple p-5 m-auto fixed pin-b z-50 hidden focus:outline-none font-bold">Update found, click to update</button>

    <div class="menu-wrapper flex fixed w-full bg-white z-50">
      <nav class="top-menu hidden md:flex justify-start container lg:justify-center md:m-auto md:pt-2 md:pb-2">
        <a href="/" class="hidden md:block">
          <img class="logo w-18 p-1" data-src="/images/logo.png" width="100" alt="marabesi.com logo - two m's and one dot" title="marabesi.com logo - two m's and one dot" />
        </a>

        <ul id="menu-list" class="container-menu hidden flex-col pl-5 md:flex md:pl-0 md:flex-row md:m-auto lg:m-0">
          
           
            <li class="item pt-2 pb-2 md:p-2">
              <a class="item-link no-underline" href="/talks">
                Talks
              </a>
            </li>
          
          
           
            <li class="item pt-2 pb-2 md:p-2">
              <a class="item-link no-underline" href="/about">
                About
              </a>
            </li>
          
          
           
            <li class="item pt-2 pb-2 md:p-2">
              <a class="item-link no-underline" href="/newbie-guide">
                Dev guide
              </a>
            </li>
          
          
           
            <li class="item pt-2 pb-2 md:p-2">
              <a class="item-link no-underline" href="/resources">
                software development
              </a>
            </li>
          
          
           
            <li class="item pt-2 pb-2 md:p-2">
              <a class="item-link no-underline" href="/tests/">
                Tests
              </a>
            </li>
          
          
           
            <li class="item pt-2 pb-2 md:p-2">
              <a class="item-link no-underline" href="/agenda">
                Conferences
              </a>
            </li>
          
          
           
            <li class="item pt-2 pb-2 md:p-2">
              <a class="item-link no-underline" href="/projects">
                Side projects
              </a>
            </li>
          
          
        </ul>
      </nav>

      <div class="w-full flex items-center h-12 pl-2 bg-white md:hidden">
        <svg id="menu" class="cursor-pointer w-10 h-10 p-2 text-marabesi-pink fill-current" xmlns="http://www.w3.org/2000/svg"
          x="0px" y="0px" width="50" height="50" viewBox="0 0 24 24">
          <path
            style="line-height:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000;text-transform:none;block-progression:tb;isolation:auto;mix-blend-mode:normal"
            d="M 2 5 L 2 7 L 22 7 L 22 5 L 2 5 z M 2 11 L 2 13 L 22 13 L 22 11 L 2 11 z M 2 17 L 2 19 L 22 19 L 22 17 L 2 17 z"
            font-weight="400" font-family="sans-serif" white-space="normal" overflow="visible"></path>
        </svg>
      </div>
    </div>

    <div class="flex flex-col items-center justify-center p-5">
      <input type="text" id="search-input" placeholder="search" aria-label="search" class="focus:outline-none border border-marabesi-purple text-marabesi-purple w-full p-3 mb-2 container mt-20 lg:mt-12">
      <ul id="results-container"></ul>
    </div>

    <div class="shell-content">
      
        <div class="hidden md:block">
          <div style="background-image: url('/images/posts/2021-05-29-on-100-percent-code-coverage/featured.jpg'); background-size: cover; background-position-y: center; width: 100%; height: 600px;"></div>
          <small class="mt-1 mr-1 flex justify-end">
            Image from: <a href="https://wallpapersafari.com/w/HYUtdS" target="_blank">https://wallpapersafari.com/w/HYUtdS</a>
          </small>
        </div>
      

        <div class="page-content container flex flex-col p-1 m-auto">
  
    <main class="mb-5 lg:flex">
      <div class="w-full pl-5 pr-5 lg:w-3/4">
        <h1 id="on-100-percent-code-coverage">On one hundred percent code coverage</h1>

        <p>The mindset for testing for developers has changed over the years as the software
industry is evolving. Even though, testing practice is not widely used, it is integrated in the
development cycle of the application. As such, code coverage became a popular subject
among developers and discussions have been risen in order to agree on a consensus of
code coverage.</p>

<p>This post aims to give this discussion a push and share what I think about code coverage,
what I see teams doing and what I understand that is effective or not.</p>

<h2 id="test-driven-development">Test driven development</h2>

<p>Test driven development has been (TDD) adopted for developers in order to achieve
high quality software as well as to keep it evolving over time and avoid
the fear of change. Therefore, <a class="citation" href="#tdd_by_example_kent_beck">[1]</a>
and <a class="citation" href="#martin_fowler_tdd">[2]</a>
describes as TDD being a three stage flow (red-green-blue), is not what I
identify in the projects I have worked on.</p>

<p>Most of those projects were using a combination of ITL(interactive test last) or not testing at all,
the test was given to a QA (Quality assurance) professional. In this scenario, the team wasn’t
getting any value at the time to keep the tests up to date or even to
write them. This is a entire discussion that I will not approach here, though,
it is what possibly leads to miss leading metrics. As often management
try to force developers to reach 100% coverage just for the sake of it, or because
they saw they could use that to force some kind of behavior on developers.
James Carr catalogue named this anti-pattern as “The Liar”, which Dave Farley
uses as a base line to discuss the subject on his video
<a class="citation" href="#dave_farley_the_liar_pattern">[3]</a>
(<a class="citation" href="#dave_farley_bdd_explained">[4]</a>)
also mention the coverage goal being a missleading understading on his video
about Behaviour Driven Development).</p>

<p>TDD is a safe net for developers to keep improving the code, communicate intention
and also a culture to follow. As Dave Farley says on his video: practice TDD and
avoid the liar trap.</p>

<h2 id="quality-gates">Quality gates</h2>

<p>Quality gates are used to enforce some minimum rules during the software development
life cycle. Among different rules we can list:</p>

<ul>
  <li>Code linting</li>
  <li>Test suite</li>
  <li>Security checks</li>
  <li>Performance budget</li>
</ul>

<p>Many would argue that code coverage would have its place, which <strong>I agree</strong>. We could
use code coverage as a gate to not allow code into production, if the code base
has less than X percentage we fail the release process. Therefore, besides being
a quality gate, it should be a indication of the test suite health.</p>

<p>The team, should trust the test suite and <strong>the coverage should reflect the health
of the suite</strong>. Which, in many cases this is <strong>not what happens</strong>. The common approach
is to target X percent of coverage no matter what.</p>

<h2 id="avoiding-wrong-metrics">Avoiding wrong metrics</h2>

<p>My experience tells that for many developers tests are a matter of needed, kind
of obligation. They write the tests not because they want to be proud of the
work they do, or because they want to give the next developer (that will
maintain that in the future) a hint on what the code was built to support or
not.</p>

<p>As such managers, try to enforce the idea that forcing developers to
reach X percentage of coverage will increase the code base quality.
<a class="citation" href="#emily_bache_refactoring_kata">[5]</a>
recorded a 3 series video going through the famous Gilded Rosa kata, which
to goal is to refactor the code given. Around the minute 15:59 of the first
video she depicts an issue in the tests that she had. Even though she
changed a critical parte of the production code, the tests were passing. The
code had one hundread pecent coverage. It was not giving the desired feedback.</p>

<p>Of course it was a kata and she beautifuly depicts this problem as she goes
through the code.</p>

<p>Still, I see developers making they proud of themselves because they have X
percentage of coverage.</p>

<p>This video series alone points how useless matric of X percentage coverage is.</p>

<p>Code coverage should be a side effect of the test suite quality
<a class="citation" href="#dave_farley_bdd_explained">[4]</a>,
which software developers can rely on and understand that tests are a safe net
for continuous improvement of the code.</p>

<h2 id="references">References</h2>

<ol class="bibliography"><li><span id="tdd_by_example_kent_beck">[1]K. Beck, <i>TDD by example</i>. Addison-Wesley Professional, 2000. </span></li>
<li><span id="martin_fowler_tdd">[2]M. Fowler, “TestDrivenDevelopment,” 2005 [Online]. Available at: <a href="https://martinfowler.com/bliki/TestDrivenDevelopment.html" target="_blank">https://martinfowler.com/bliki/TestDrivenDevelopment.html</a>. [Accessed: 31-May-2021]</span></li>
<li><span id="dave_farley_the_liar_pattern">[3]D. Farley, “When Test Driven Development Goes Wrong,” 2021 [Online]. Available at: <a href="https://youtu.be/UWtEVKVPBQ0?t=243" target="_blank">https://youtu.be/UWtEVKVPBQ0?t=243</a>. [Accessed: 05-Jun-2021]</span></li>
<li><span id="dave_farley_bdd_explained">[4]D. Farley, “BDD Explained (Behaviour Driven Development,” 2021 [Online]. Available at: <a href="https://www.youtube.com/watch?v=zYj70EsD7uI" target="_blank">https://www.youtube.com/watch?v=zYj70EsD7uI</a>. [Accessed: 27-May-2020]</span></li>
<li><span id="emily_bache_refactoring_kata">[5]E. Bache, “Introducing the Gilded Rose kata and writing test cases using Approval Tests,” 2018 [Online]. Available at: <a href="https://www.youtube.com/playlist?list=PLuvRKxeqrv4K-rn0zxHPNiXOWBkP9ZZIH" target="_blank">https://www.youtube.com/playlist?list=PLuvRKxeqrv4K-rn0zxHPNiXOWBkP9ZZIH</a>. [Accessed: 31-May-2021]</span></li></ol>

      </div>
      <div class="hidden w-1/4 lg:block">
        <div class="sticky pin-t pl-2 xl:top-30">
          
          <h2 id="table-of-contents">Table of contents</h2>

<ol>
  <li><a href="#on-100-percent-code-coverage">Introduction</a></li>
  <li><a href="#test-driven-development">Test driven development</a></li>
  <li><a href="#quality-gates">Quality gates</a></li>
  <li><a href="#avoiding-wrong-metrics">Avoiding wrong metrics</a></li>
  <li><a href="#references">References</a></li>
</ol>


          <h2>Share this on</h2>

          <div class="flex -ml-2">
            

<style>
#share-buttons {display: flex; justify-content: center; align-items: center;}
#share-buttons > div {
    position: relative;
    text-align: left; 
    height: 36px; 
    width: 32px; 
    float: left; 
    text-align: center;
}
#share-buttons > div > svg {height: 16px; fill: #f12f46; margin-top: 10px;}
#share-buttons > div:hover {cursor: pointer;}
#share-buttons > div.facebook:hover > svg {fill: #3B5998;}
#share-buttons > div.twitter:hover > svg {fill: #55ACEE;}
#share-buttons > div.linkedin:hover > svg {fill: #0077b5;}
#share-buttons > div.pinterest:hover > svg {fill: #CB2027;}
#share-buttons > div.gplus:hover > svg {fill: #dd4b39;}
#share-buttons > div.mail:hover > svg {fill: #7D7D7D;}
#share-buttons > div.instagram:hover > svg {fill: #C73B92;}
#share-buttons > div.facebook > svg {height: 18px; margin-top: 9px;}
#share-buttons > div.twitter > svg {height: 20px; margin-top: 8px;}
#share-buttons > div.linkedin > svg {height: 19px; margin-top: 7px;}
#share-buttons > div.pinterest > svg {height: 20px; margin-top: 9px;}
#share-buttons > div.gplus > svg {height: 17px; margin-top: 9px; position: relative; left: 1px;}
#share-buttons > div.mail > svg {height: 14px; margin-top: 11px;}
</style>

<div id="share-buttons" class="mb-5">
    <div class="facebook" title="Share this on Facebook" onclick="window.open('http://www.facebook.com/share.php?u=https://marabesi.com/thoughts/2021/05/29/on-100-percent-code-coverage.html');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759h-306v-759h-255v-296h255v-218q0-186 104-288.5t277-102.5q147 0 228 12z"/></svg></div>
    <div class="twitter" title="Share this on Twitter" onclick="window.open('https://twitter.com/intent/tweet?text=https://marabesi.com/thoughts/2021/05/29/on-100-percent-code-coverage.html');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"/></svg></div>
    <div class="linkedin" title="Share this on Linkedin" onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&url=https://marabesi.com/thoughts/2021/05/29/on-100-percent-code-coverage.html&title=&summary=&source=');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M477 625v991h-330v-991h330zm21-306q1 73-50.5 122t-135.5 49h-2q-82 0-132-49t-50-122q0-74 51.5-122.5t134.5-48.5 133 48.5 51 122.5zm1166 729v568h-329v-530q0-105-40.5-164.5t-126.5-59.5q-63 0-105.5 34.5t-63.5 85.5q-11 30-11 81v553h-329q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5 114.5-15.5q171 0 275 113.5t104 332.5z"/></svg></div>
</div>
          </div>

          <h2>You also might like</h2>

          
          
          

          
            
            

            

            
          
            
            

            

            
          
            
            

            

            
          
            
            

            

            
              <div class="mt-4 mb-4">
                <a href="/web/2021/04/25/jest-asserts-beyond-equals.html">Jest asserts beyond equals [  <span class="text-marabesi-pink">TDD,</span>  <span class="text-marabesi-pink">test,</span>  ]</a>
              </div>
              
              
            
          
            
            

            

            
              <div class="mt-4 mb-4">
                <a href="/thoughts/2021/04/08/how-to-lose-your-developers.html">How to lose your developers [  <span class="text-marabesi-pink">development,</span>  <span class="text-marabesi-pink">developers,</span>  <span class="text-marabesi-pink">software,</span>  <span class="text-marabesi-pink">code,</span>  ]</a>
              </div>
              
              
            
          
            
            

            

            
              <div class="mt-4 mb-4">
                <a href="/web/2021/04/04/jest-timers-and-reactjs.html">Jest timers and reactjs [  <span class="text-marabesi-pink">test,</span>  <span class="text-marabesi-pink">suite,</span>  ]</a>
              </div>
              
              
            
          
            
            

            

            
          
            
            

            

            
          
            
            

            

            
          
            
            

            

            
          
            
            

            

            
          
            
            

            

            
          
            
            

            

            
          
            
            

            

            
          
            
            

            

            
          
            
            

            

            
          
            
            

            

            
          
            
            

            

            
          
            
            

            

            
          
            
            

            

            
          
            
            

            

            
          
            
            

            

            
          
            
            

            

            
          
            
            

            

            
              <div class="mt-4 mb-4">
                <a href="/development/2020/11/29/2020-mocks-dummies-spies-fakes-testing-your-code.html">Mocks, dummies, spies, fakes - testing your code [  <span class="text-marabesi-pink">test,</span>  <span class="text-marabesi-pink">Test,</span>  <span class="text-marabesi-pink">testing,</span>  <span class="text-marabesi-pink">code,</span>  ]</a>
              </div>
              
              
                
        </div>
      </div>
    </main>
  


  <div id="disqus_thread"></div>
</div>

      <div class="footer">
        <div class="footer-details">
          Made with 💖 by <a href="https://twitter.com/MatheusMarabesi" target="_blank">@MatheusMarabesi</a>
        </div>
      </div>
    </div>

    
    <script>
      (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
          (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
          m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
      })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

      ga('create', 'UA-58623708-1', 'auto');
      ga('send', 'pageview');
    </script>
    

    <script async src="/assets/main-bundle.js"></script>
  </body>
</html>